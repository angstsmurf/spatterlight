/*
 *	Simple curses UI implementation. You probably want to replace
 *	this with something more useful
 */

#include <stdlib.h>
#include <stdarg.h>
#include <stdio.h>
#include <ctype.h>

#include "glk.h"
#include "glkimp.h"
#include "glkstart.h"

#include "taylor.h"
#include "utility.h"
#include "sagadraw.h"


#define GLK_BUFFER_ROCK 1
#define GLK_STATUS_ROCK 1010
#define GLK_GRAPHICS_ROCK 1020

winid_t Bottom, Top, Graphics;
static int OutputPos;
static int OutLine;
static int OutC;
static char OutWord[128];
static int SavedPos;

glui32 Width; /* Terminal width */
glui32 TopHeight; /* Height of top window */

winid_t FindGlkWindowWithRock(glui32 rock)
{
    winid_t win;
    glui32 rockptr;
    for (win = glk_window_iterate(NULL, &rockptr); win;
         win = glk_window_iterate(win, &rockptr)) {
        if (rockptr == rock)
            return win;
    }
    return 0;
}

void Display(winid_t w, const char *fmt, ...)
{
    va_list ap;
    char msg[2048];

    int size = sizeof msg;

    va_start(ap, fmt);
    vsnprintf(msg, size, fmt, ap);
    va_end(ap);

    glk_put_string_stream(glk_window_get_stream(w), msg);
}

void HitEnter(void)
{
    glk_request_char_event(Bottom);

    event_t ev;
    int result = 0;
    do {
        glk_select(&ev);
        if (ev.type == evtype_CharInput) {
            if (ev.val1 == keycode_Return) {
                result = 1;
            } else {
                glk_request_char_event(Bottom);
            }
        }
    } while (result == 0);

    return;
}



void PrintCharacter(unsigned char c)
{
    Display(Bottom, "%c", c);
//	if(OutC == 0 &&  c ==' ')
//		return;
//	if(Window == 1) {
//		if(isspace(c)) {
//            WriteChar(Bottom, " ");
//			return;
//		}
//		OutWord[OutC] = c;
//		OutC++;
//		if(OutC > 79)
//			WordFlush(Bottom);
//		else if(OutC + OutputPos > 78)
//			Scroll(Bottom);
//		return;
//	} else {
//		if(isspace(c)) {
//			WordFlush(Top);
//			WriteChar(Top, ' ');
//			if(c == '\n') {
//				OutLine++;
//				OutputPos = 0;
//				wmove(Top, OutLine, OutputPos);
//			}
//			return;
//		}
//		OutWord[OutC] = c;
//		OutC++;
//		if(OutC == 78)
//			WordFlush(Top);
//		else if(OutC + OutputPos > 78) {
//			OutLine++;
//			OutputPos = 0;
//		}
//		return;
//	}
}

unsigned char WaitCharacter(void)
{
    glk_request_char_event(Bottom);
    
    event_t ev;    
    do {
        glk_select(&ev);
    } while (ev.type != evtype_CharInput);
    return ev.val1;
}

void Look(void);

void LineInput(char *buf, int len)
{
    event_t ev;

    glk_request_line_event(Bottom, buf, len - 1, 0);

    while(1)
    {
        glk_select(&ev);

        if(ev.type == evtype_LineInput)
            break;
        else if(ev.type == evtype_Arrange)
            Look();
    }

    buf[ev.val1] = 0;
}


const glui32 OptimalPictureSize(glui32 *width, glui32 *height)
{
    *width = 255;
    *height = 96;
    int multiplier = 1;
    glui32 graphwidth, graphheight;
    glk_window_get_size(Graphics, &graphwidth, &graphheight);
    multiplier = graphheight / 96;
    if (255 * multiplier > graphwidth)
        multiplier = graphwidth / 255;

    if (multiplier == 0)
        multiplier = 1;

    *width = 255 * multiplier;
    *height = 96 * multiplier;

    return multiplier;
}

void OpenGraphicsWindow(void)
{
    if (!gli_enable_graphics)
        return;
    glui32 graphwidth, graphheight, optimal_width, optimal_height;

    if (Top == NULL)
        Top = FindGlkWindowWithRock(GLK_STATUS_ROCK);
    if (Graphics == NULL)
        Graphics = FindGlkWindowWithRock(GLK_GRAPHICS_ROCK);
    if (Graphics == NULL && Top != NULL) {
        glk_window_get_size(Top, &Width, &TopHeight);
        glk_window_close(Top, NULL);
        Graphics = glk_window_open(Bottom, winmethod_Above | winmethod_Proportional,
                                   60, wintype_Graphics, GLK_GRAPHICS_ROCK);
        glk_window_get_size(Graphics, &graphwidth, &graphheight);
        pixel_size = OptimalPictureSize(&optimal_width, &optimal_height);
        x_offset = ((int)graphwidth - (int)optimal_width) / 2;

        if (graphheight > optimal_height) {
            winid_t parent = glk_window_get_parent(Graphics);
            glk_window_set_arrangement(parent, winmethod_Above | winmethod_Fixed,
                                       optimal_height, NULL);
        }

        /* Set the graphics window background to match
         * the main window background, best as we can,
         * and clear the window.
         */
        glui32 background_color;
        if (glk_style_measure(Bottom, style_Normal, stylehint_BackColor,
                              &background_color)) {
            glk_window_set_background_color(Graphics, background_color);
            glk_window_clear(Graphics);
        }

        Top = glk_window_open(Bottom, winmethod_Above | winmethod_Fixed, TopHeight,
                              wintype_TextGrid, GLK_STATUS_ROCK);
        glk_window_get_size(Top, &Width, &TopHeight);
    } else {
        if (!Graphics)
            Graphics = glk_window_open(Bottom, winmethod_Above | winmethod_Proportional, 60,
                                       wintype_Graphics, GLK_GRAPHICS_ROCK);
        glk_window_get_size(Graphics, &graphwidth, &graphheight);
        pixel_size = OptimalPictureSize(&optimal_width, &optimal_height);
        x_offset = (graphwidth - optimal_width) / 2;
        winid_t parent = glk_window_get_parent(Graphics);
        glk_window_set_arrangement(parent, winmethod_Above | winmethod_Fixed,
                                   optimal_height, NULL);
    }
}

void OpenTopWindow(void)
{
    Top = FindGlkWindowWithRock(GLK_STATUS_ROCK);
    if (Top == NULL) {
        Top = glk_window_open(Bottom, winmethod_Above | winmethod_Fixed,
                              TopHeight, wintype_TextGrid, GLK_STATUS_ROCK);
        if (Top == NULL) {
            Top = Bottom;
        } else {
            glk_window_get_size(Top, &Width, NULL);
        }
    }
}

void DrawBlack(void)
{
    glk_window_fill_rect(Graphics, 0, x_offset, 0, 32 * 8 * pixel_size,
                         12 * 8 * pixel_size);
}

void DisplayInit(void)
{
    Bottom = glk_window_open(0, 0, 0, wintype_TextBuffer, GLK_BUFFER_ROCK);
    OpenTopWindow();
    OpenGraphicsWindow();
    SagaSetup(0);
//    uint8_t width = 0, height = 0, xoff = 0, yoff = 0;
//    uint8_t *ptr = SeekToPos(FileImage, 0x85bb);
//    do {
//        width = *ptr++;
//        height = *ptr++;
//        xoff = *ptr++;
//        yoff = *ptr++;
//        if (width < 33 && width > 0 && height < 13 && height > 0 && xoff < 33 && yoff < 13) {
//            fprintf(stderr, "Offset: %lx\n", ptr - FileImage);
//            DrawSagaPictureFromData(ptr, width, height, xoff, yoff);
//            DrawSagaPictureFromBuffer();
//            HitEnter();
//        }
//    } while (ptr - FileImage < FileImageLen);
}





int rotate_left_with_carry(uint8_t *byte, int last_carry)
{
    int carry = ((*byte & 0x80) > 0);
    *byte = *byte << 1;
    if (last_carry)
        *byte = *byte | 0x01;
    return carry;
}

int rotate_right_with_carry(uint8_t *byte, int last_carry)
{
    int carry = ((*byte & 0x01) > 0);
    *byte = *byte >> 1;
    if (last_carry)
        *byte = *byte | 0x80;
    return carry;
}


static const uint8_t forest_mem[6144] = {
    0x00, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x40, 0x02,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x10, 0x42, 0x08, 0x22,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00,
    0x31, 0x08, 0x00, 0x00, 0x00, 0x00, 0x22, 0x40,
    0x00, 0x40, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00,
    0x10, 0x60, 0x00, 0x00, 0x00, 0x08, 0x00, 0x44,
    0x00, 0x00, 0x00, 0x00, 0x22, 0x00, 0x20, 0x00,
    0x00, 0x22, 0xf8, 0x00, 0x00, 0x00, 0x08, 0x42,
    0x24, 0x40, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x08, 0x5c, 0x58, 0x00, 0x22, 0x00, 0x00, 0x44,
    0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x02, 0x02, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x22, 0x22,
    0x00, 0x00, 0x00, 0x22, 0x22, 0x00, 0x22, 0x22,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00,
    0x00, 0x00, 0x08, 0x00, 0x40, 0x42, 0x00, 0x00,
    0x00, 0x00, 0x10, 0x00, 0x00, 0x24, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x30, 0x31, 0x08, 0x30, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40,
    0x00, 0x02, 0x24, 0x10, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x08, 0x04, 0x00, 0x00, 0x00,
    0x00, 0x11, 0x30, 0x08, 0x18, 0x00, 0x00, 0x00,
    0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x40, 0x02,
    0x24, 0x42, 0x10, 0x42, 0x08, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08,
    0x00, 0x8c, 0x42, 0x00, 0x00, 0x02, 0x08, 0x00,
    0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x10, 0x44,
    0x40, 0x00, 0x22, 0x00, 0x00, 0x24, 0x00, 0x00,
    0x42, 0x00, 0x00, 0x04, 0x00, 0x00, 0x08, 0x00,
    0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x00, 0x00,
    0x00, 0x5c, 0x00, 0x00, 0x00, 0x00, 0x80, 0x01,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x16, 0x00,
    0x00, 0x10, 0x20, 0x20, 0x02, 0x6d, 0xc3, 0x16,
    0x00, 0x61, 0x00, 0x03, 0x01, 0x80, 0x61, 0x43,
    0x63, 0x0e, 0x04, 0x00, 0x00, 0x00, 0x16, 0x69,
    0x82, 0x84, 0x00, 0x00, 0x00, 0x84, 0x00, 0x00,
    0x43, 0x22, 0x10, 0x20, 0x00, 0xcf, 0x80, 0x68,
    0x40, 0x00, 0x00, 0x80, 0x16, 0x00, 0x02, 0x60,
    0x00, 0x16, 0x5c, 0x00, 0x00, 0x00, 0x03, 0x69,
    0xf0, 0x28, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x43, 0x6e, 0x4c, 0x20, 0x16, 0x02, 0x00, 0x68,
    0x52, 0x00, 0x02, 0x00, 0x03, 0x02, 0x00, 0x03,
    0x30, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x04,
    0x16, 0x29, 0xc3, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x20, 0x05, 0x20, 0x1f, 0x00, 0x16, 0x16,
    0x00, 0x00, 0x00, 0x16, 0x16, 0x00, 0x16, 0x16,
    0x10, 0x04, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00,
    0x00, 0x00, 0x42, 0x00, 0x84, 0x69, 0x00, 0x00,
    0x00, 0x00, 0x40, 0x00, 0x02, 0x52, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x60, 0x63, 0x41, 0x60, 0x00,
    0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x84,
    0x41, 0x96, 0x0f, 0x43, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xc2, 0x48, 0x00, 0x20, 0x00,
    0x00, 0x03, 0x60, 0xc3, 0x06, 0x00, 0x04, 0x00,
    0x02, 0x58, 0x00, 0x00, 0x00, 0x00, 0x84, 0x14,
    0x0f, 0x96, 0xc3, 0x16, 0xc3, 0x00, 0x08, 0x10,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x00,
    0x00, 0x06, 0x69, 0x00, 0x00, 0x41, 0x41, 0x04,
    0x02, 0x02, 0x52, 0x08, 0x00, 0x00, 0xc3, 0x68,
    0x68, 0x20, 0x16, 0x80, 0x00, 0x4a, 0x10, 0x00,
    0x68, 0x00, 0x00, 0x48, 0x00, 0x00, 0x02, 0x00,
    0x00, 0x00, 0x00, 0x01, 0x41, 0x14, 0x08, 0x00,
    0x30, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x28, 0x04,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x44, 0x00,
    0x00, 0x00, 0x64, 0x64, 0x40, 0x2e, 0x66, 0x04,
    0x00, 0x2c, 0x00, 0x06, 0x04, 0x28, 0x2c, 0x64,
    0x6d, 0x07, 0x06, 0x00, 0x00, 0x00, 0x04, 0x04,
    0x22, 0x38, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00,
    0x26, 0x70, 0x30, 0x70, 0x80, 0x66, 0x20, 0x22,
    0x40, 0x00, 0x00, 0x20, 0x44, 0x00, 0x44, 0x20,
    0x0c, 0x44, 0x2c, 0x00, 0x00, 0x00, 0x06, 0x2c,
    0x4a, 0x28, 0x9c, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x26, 0xfb, 0x6a, 0x60, 0x44, 0x04, 0x02, 0x22,
    0x48, 0x00, 0x04, 0x00, 0x06, 0x04, 0x00, 0x06,
    0x60, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x19,
    0x14, 0x0c, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x2c, 0x60, 0xd4, 0x64, 0x27, 0x40, 0x04, 0x44,
    0x00, 0x00, 0x40, 0x04, 0x44, 0x40, 0x04, 0x44,
    0x00, 0x06, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x39, 0x2c, 0x00, 0x00,
    0x00, 0x00, 0x02, 0x00, 0x04, 0x48, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x60, 0x6d, 0x44, 0x60, 0x0c,
    0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x38,
    0x44, 0x20, 0x52, 0x26, 0x40, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x64, 0x02, 0x00, 0x08, 0x00,
    0x00, 0x0d, 0x60, 0x66, 0xd9, 0x00, 0x01, 0x29,
    0x00, 0x44, 0x30, 0x00, 0x00, 0x00, 0x39, 0x14,
    0x52, 0x34, 0x66, 0x34, 0x66, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40,
    0x00, 0x16, 0x2c, 0x02, 0x80, 0x04, 0x44, 0x01,
    0x00, 0x00, 0x4a, 0x04, 0x00, 0x00, 0x66, 0x20,
    0x28, 0x98, 0x04, 0x20, 0x00, 0x50, 0x00, 0x04,
    0x2c, 0x00, 0x00, 0x02, 0x00, 0x00, 0x40, 0x00,
    0x00, 0x00, 0x00, 0x14, 0x04, 0x14, 0x28, 0x29,
    0x20, 0x3a, 0x00, 0x00, 0x00, 0x00, 0x50, 0x08,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00,
    0x00, 0x02, 0x40, 0x40, 0x00, 0x8c, 0x00, 0x00,
    0x00, 0x88, 0x00, 0x00, 0x0e, 0x50, 0x88, 0x00,
    0xcb, 0x61, 0x02, 0x00, 0x00, 0x00, 0x00, 0x8c,
    0x00, 0x70, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00,
    0x00, 0xa4, 0x22, 0x60, 0x40, 0x00, 0x30, 0x04,
    0x00, 0x00, 0x00, 0x30, 0x20, 0x00, 0x00, 0x00,
    0x04, 0x20, 0x3a, 0x00, 0x00, 0x00, 0x00, 0x8c,
    0x15, 0x04, 0x4c, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xa0, 0x51, 0x40, 0x20, 0x01, 0x04, 0x04,
    0x00, 0x00, 0x01, 0x00, 0x00, 0x01, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x12,
    0x11, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x04, 0x40, 0x1b, 0x40, 0x4a, 0x20, 0x00, 0x20,
    0x00, 0x00, 0x20, 0x00, 0x20, 0x20, 0x00, 0x20,
    0x02, 0x02, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00,
    0x00, 0x01, 0x00, 0x00, 0x32, 0x0c, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xc0, 0xcb, 0x00, 0xc0, 0x04,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70,
    0x00, 0x31, 0xa8, 0x00, 0x90, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00,
    0x00, 0x03, 0xc0, 0x00, 0xa4, 0x00, 0x60, 0x42,
    0x00, 0x12, 0x20, 0x00, 0x00, 0x00, 0x32, 0x20,
    0xa8, 0x31, 0x00, 0x11, 0x00, 0x00, 0x00, 0x02,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x04, 0x03, 0x8c, 0x03, 0x40, 0x88, 0x00, 0x60,
    0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x88, 0x48, 0x00, 0x30, 0x00, 0xa0, 0x02, 0x00,
    0x88, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x0a, 0x88, 0x20, 0x80, 0x42,
    0x02, 0x86, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00,
    0x00, 0x00, 0x04, 0x04, 0x12, 0x24, 0x4e, 0x01,
    0x00, 0x04, 0x00, 0x0e, 0x00, 0x00, 0x04, 0x0e,
    0x0f, 0x5c, 0x20, 0x00, 0x00, 0x00, 0x01, 0x04,
    0x44, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x02, 0x26, 0x00, 0x06, 0x00, 0x6e, 0x20, 0x0c,
    0x50, 0x00, 0x00, 0x20, 0x30, 0x00, 0x01, 0x0c,
    0x00, 0x31, 0x86, 0x00, 0x00, 0x00, 0x0e, 0x04,
    0x62, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x0e, 0x1e, 0x89, 0x06, 0x30, 0x00, 0x0c, 0x0c,
    0x50, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x0e,
    0x04, 0x02, 0x00, 0x00, 0x00, 0x11, 0x00, 0x00,
    0x00, 0x04, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x02, 0x06, 0x05, 0x04, 0x72, 0x30, 0x01, 0x30,
    0x00, 0x00, 0x30, 0x01, 0x30, 0x30, 0x01, 0x30,
    0x00, 0x20, 0x00, 0x00, 0x00, 0x04, 0x00, 0x31,
    0x00, 0x20, 0x08, 0x00, 0x00, 0x04, 0x00, 0x00,
    0x00, 0x00, 0x40, 0x00, 0x11, 0x50, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x0f, 0x0a, 0x00, 0x00,
    0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x22, 0x20, 0x46, 0x02, 0xa0, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x40, 0x88, 0x00, 0x04, 0x00,
    0x00, 0x07, 0x00, 0x4e, 0x92, 0x00, 0x00, 0x00,
    0x11, 0x4a, 0x02, 0x00, 0x00, 0x00, 0x00, 0x20,
    0x46, 0x20, 0x02, 0x00, 0x0e, 0x00, 0x02, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x21, 0x01, 0x04,
    0x80, 0x00, 0x04, 0x00, 0x00, 0x00, 0x0a, 0x00,
    0x11, 0x11, 0x55, 0x04, 0x00, 0x00, 0x02, 0x80,
    0x00, 0x00, 0x01, 0x20, 0x00, 0xa0, 0x00, 0x40,
    0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x02, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00,
    0x06, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x22, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x20, 0x0c, 0x0c, 0x01, 0x32, 0x9c, 0x04,
    0x00, 0x02, 0x00, 0x1c, 0x26, 0x22, 0x02, 0x14,
    0x16, 0x34, 0x30, 0x00, 0x00, 0x00, 0x04, 0x22,
    0x88, 0x40, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00,
    0x01, 0x3e, 0x26, 0x0e, 0x64, 0xbc, 0x44, 0x04,
    0x48, 0x00, 0x00, 0x44, 0x20, 0x00, 0x14, 0x04,
    0x60, 0x34, 0xe0, 0x00, 0x00, 0x00, 0x0c, 0x22,
    0xbb, 0x22, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x04, 0x6d, 0x66, 0x0c, 0x20, 0x04, 0x2c, 0x04,
    0x40, 0x00, 0x04, 0x00, 0x1c, 0x04, 0x00, 0x1c,
    0x0c, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x06,
    0x04, 0x02, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x60, 0x0c, 0x2c, 0x0c, 0x34, 0x34, 0x04, 0x20,
    0x00, 0x00, 0x34, 0x04, 0x20, 0x34, 0x04, 0x20,
    0x20, 0x30, 0x00, 0x00, 0x00, 0x22, 0x00, 0x34,
    0x00, 0x44, 0x04, 0x00, 0x02, 0x02, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x34, 0x40, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x16, 0x14, 0x00, 0x60,
    0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x40,
    0x11, 0x44, 0xdd, 0x01, 0xd8, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x02, 0x00,
    0x00, 0x02, 0x00, 0x9c, 0x41, 0x00, 0x24, 0x06,
    0x20, 0x22, 0x06, 0x00, 0x00, 0x00, 0x02, 0x44,
    0xdd, 0x44, 0x01, 0x04, 0x00, 0x00, 0x20, 0x24,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x08,
    0x00, 0x00, 0x22, 0x08, 0x64, 0x00, 0x14, 0x24,
    0x20, 0x20, 0x48, 0x20, 0x00, 0x00, 0x01, 0x20,
    0x20, 0x60, 0x04, 0x44, 0x00, 0x00, 0x20, 0x1f,
    0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x1f, 0x00, 0x00, 0x44, 0x00, 0x44, 0x22, 0x06,
    0x04, 0x70, 0x00, 0x00, 0x00, 0x00, 0x82, 0x42,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x10, 0x10, 0x04, 0x68, 0x21, 0x02,
    0x00, 0x08, 0x00, 0x21, 0x43, 0x82, 0x08, 0x00,
    0x18, 0x3a, 0x00, 0x00, 0x00, 0x00, 0x06, 0x40,
    0x20, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00,
    0x00, 0x4d, 0x0c, 0x04, 0xc2, 0x21, 0x16, 0x01,
    0x24, 0x00, 0x00, 0x16, 0x80, 0x00, 0x10, 0x08,
    0x30, 0x96, 0x70, 0x00, 0x00, 0x00, 0x01, 0x68,
    0x0e, 0x28, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x01, 0x5f, 0x3b, 0x10, 0x80, 0x16, 0x69, 0x01,
    0x00, 0x00, 0x16, 0x00, 0x21, 0x16, 0x00, 0x21,
    0x00, 0x10, 0x00, 0x00, 0x00, 0x82, 0x00, 0x03,
    0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x30, 0x10, 0x91, 0x10, 0x68, 0x96, 0x02, 0x80,
    0x00, 0x00, 0x96, 0x02, 0x80, 0x96, 0x02, 0x80,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x00, 0x96,
    0x00, 0x16, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x04, 0x00, 0x16, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x18, 0x01, 0x00, 0x30,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x04, 0x02, 0x70, 0x00, 0x06, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x40, 0x00,
    0x00, 0x00, 0x00, 0x21, 0x36, 0x00, 0x02, 0x00,
    0x82, 0x1a, 0x04, 0x00, 0x00, 0x00, 0x00, 0x14,
    0x70, 0x16, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x12, 0x00,
    0x20, 0x00, 0x68, 0x18, 0xc2, 0x40, 0x01, 0x02,
    0x82, 0x82, 0x24, 0x28, 0x00, 0x00, 0x00, 0x60,
    0x60, 0xc0, 0x06, 0x16, 0x00, 0x00, 0x0f, 0xf7,
    0x40, 0x00, 0x00, 0x20, 0x00, 0x00, 0x20, 0x0f,
    0xff, 0x00, 0x00, 0x41, 0x40, 0x14, 0x40, 0x00,
    0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10, 0x08,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x44, 0x02, 0x00,
    0x00, 0x00, 0x00, 0x02, 0x08, 0x10, 0x00, 0x00,
    0x00, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x02, 0x44,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x7a, 0x00, 0x00, 0x08, 0x02, 0x22, 0x00,
    0x1c, 0x00, 0x00, 0x22, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x42, 0x10, 0x00, 0x00, 0x00, 0x02, 0x44,
    0xdd, 0x44, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x42, 0x66, 0x00, 0x00, 0x22, 0x42, 0x00,
    0x00, 0x00, 0x22, 0x00, 0x02, 0x22, 0x00, 0x02,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00,
    0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x2c, 0x00, 0x80, 0x42, 0x00, 0x00,
    0x00, 0x00, 0x42, 0x00, 0x00, 0x42, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x44, 0x00, 0x42,
    0x00, 0x22, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x22, 0xbb, 0x00, 0x18, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00,
    0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x10, 0x00,
    0x40, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22,
    0xbb, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x44, 0x00, 0x08, 0x00, 0x02, 0x10,
    0x40, 0x40, 0x1c, 0x04, 0x00, 0x00, 0x00, 0x40,
    0x40, 0x00, 0x02, 0x22, 0x00, 0x00, 0xf0, 0xff,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff,
    0xff, 0x00, 0x00, 0x08, 0x00, 0x22, 0x04, 0x00,
    0x01, 0x22, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00,
    0x00, 0x40, 0x00, 0x00, 0x00, 0xff, 0xf8, 0xfc,
    0x00, 0x00, 0x00, 0x00, 0xff, 0xfc, 0x00, 0x00,
    0x01, 0x00, 0x00, 0x40, 0x22, 0x08, 0x00, 0x40,
    0x00, 0x02, 0x31, 0x40, 0x00, 0x00, 0x00, 0x00,
    0x44, 0x00, 0x00, 0xff, 0x00, 0x1f, 0xf0, 0xff,
    0x00, 0xfc, 0x3f, 0xff, 0x00, 0x00, 0x00, 0x00,
    0xff, 0x00, 0x00, 0x80, 0x1c, 0x00, 0x40, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00,
    0x00, 0x1f, 0xff, 0x42, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00,
    0x00, 0x00, 0xf8, 0x1f, 0xff, 0xff, 0x00, 0x00,
    0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x1f,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x1a, 0x16, 0x18, 0x18, 0x10, 0x00, 0x42, 0x00,
    0x00, 0x84, 0x00, 0x40, 0x00, 0xfc, 0xc0, 0xf0,
    0x00, 0x00, 0x00, 0x00, 0xff, 0xf0, 0x00, 0x08,
    0x07, 0x00, 0x00, 0x84, 0x16, 0x41, 0x04, 0x04,
    0x18, 0x21, 0x63, 0x84, 0x06, 0x00, 0x00, 0x00,
    0x68, 0x00, 0x00, 0xf8, 0xf0, 0x03, 0x0f, 0xff,
    0x00, 0xe0, 0x07, 0x0f, 0x00, 0x00, 0x00, 0x00,
    0x33, 0x00, 0x00, 0x58, 0x24, 0x00, 0x84, 0x00,
    0x00, 0x00, 0x40, 0x21, 0x00, 0xf0, 0x00, 0x00,
    0xf0, 0x03, 0xff, 0x69, 0x00, 0xf0, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x0f, 0x0f, 0xff, 0xff, 0x00, 0x00,
    0x00, 0x00, 0xc0, 0xf3, 0x3f, 0xef, 0x00, 0x00,
    0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0xf0, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x10, 0x0f,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x22, 0x44, 0x68, 0x68, 0x40, 0x00, 0x00, 0x00,
    0x00, 0x38, 0x00, 0x20, 0x00, 0xf0, 0x00, 0xc4,
    0x00, 0x00, 0x00, 0x00, 0xff, 0xc0, 0x00, 0x00,
    0x0f, 0x00, 0x03, 0x39, 0x44, 0x44, 0x01, 0x28,
    0x16, 0x9c, 0x6d, 0x39, 0x04, 0x00, 0x00, 0x00,
    0x22, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0xff,
    0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x19, 0x00, 0x00, 0x44, 0x48, 0x00, 0x30, 0x10,
    0x00, 0x00, 0x60, 0x0c, 0x00, 0xf8, 0x00, 0x00,
    0x0f, 0x00, 0xf8, 0x2c, 0x80, 0x0f, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xef, 0xf0, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xf0,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x60, 0x00, 0x04, 0x00, 0x00, 0x05, 0x03,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x48, 0x20, 0xf0, 0xf0, 0x00, 0x00, 0x00, 0x80,
    0x00, 0x70, 0x00, 0x00, 0x00, 0xc0, 0x01, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xfe, 0x00, 0x00, 0x40,
    0x3f, 0x00, 0x01, 0x72, 0x20, 0x00, 0x60, 0x32,
    0x0f, 0x4e, 0xcb, 0x72, 0x00, 0x00, 0x00, 0x00,
    0x04, 0x00, 0x00, 0xb0, 0x00, 0x00, 0x00, 0x7f,
    0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x07, 0x00, 0x00, 0x12, 0x55, 0x00, 0x30, 0x02,
    0x00, 0x00, 0x00, 0x4a, 0x00, 0x08, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x0c, 0x50, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x40, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x52, 0x31, 0xd3, 0xd3, 0x30, 0x00, 0x10, 0x04,
    0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x01, 0x40,
    0x00, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x00, 0x00,
    0x7f, 0x00, 0x04, 0x00, 0x31, 0x0a, 0x00, 0x00,
    0xcb, 0x00, 0x0f, 0x00, 0x30, 0x00, 0x00, 0x00,
    0x0c, 0x00, 0x00, 0xce, 0x00, 0x00, 0x00, 0x3f,
    0x0d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x23, 0x00, 0x00, 0x4a, 0x05, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x0a, 0x00, 0x00, 0xf3, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x04, 0x04, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x44, 0x34, 0xb6, 0xb6, 0x24, 0x00, 0x20, 0x22,
    0x00, 0x40, 0x00, 0x2c, 0x03, 0x00, 0x01, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x04,
    0xff, 0x00, 0x04, 0x66, 0x34, 0x14, 0x24, 0x60,
    0x6d, 0x66, 0x16, 0x66, 0x20, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x81, 0x00, 0x00, 0x00, 0x0f,
    0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x30, 0x00, 0x00, 0x22, 0x4a, 0x00, 0x44, 0x64,
    0x1f, 0x00, 0x0c, 0x06, 0x00, 0xfe, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x0f, 0x07, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x58, 0x96, 0xc6, 0xc6, 0x14, 0x00, 0x80, 0x68,
    0x00, 0x00, 0x00, 0x68, 0x0f, 0x0f, 0x03, 0x08,
    0x00, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x00,
    0xff, 0x00, 0x1a, 0xc3, 0x96, 0x01, 0x02, 0x40,
    0x63, 0xc3, 0x18, 0xc3, 0x10, 0x00, 0x07, 0xe0,
    0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x07,
    0x6f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xe0, 0x00, 0x1a, 0x52, 0x00, 0x02, 0x43,
    0xff, 0xf0, 0x00, 0x00, 0x00, 0xfe, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xf8, 0xf8, 0x00, 0x00,
    0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x60, 0x42, 0x8c, 0x8c, 0x40, 0x00, 0x40, 0x44,
    0x00, 0x00, 0x00, 0x42, 0x1f, 0x00, 0x03, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00,
    0xff, 0x00, 0x1f, 0x90, 0xc2, 0x02, 0x10, 0x10,
    0x31, 0x08, 0x00, 0x10, 0x00, 0x00, 0x3f, 0xfc,
    0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x01,
    0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xfc, 0x00, 0x06, 0x24, 0x00, 0x00, 0x10,
    0xff, 0x0f, 0x00, 0x00, 0x03, 0xff, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
};


uint8_t *mem;

void print_registers(void)
{
    //    fprintf(stderr, "A:%X HL:%X (HL):%X\n", A, HL, mem[HL]);
    //    fprintf(stderr, "BC:%X DE:%X IX:%X carry:%d\n", BC, DE, IX, carry);
    //
    //    if (A == 0 && DE == 0 && IX == 0xA4BC && HL == 0xA74D && mem[HL] == 0)
    //        fprintf(stderr, "Seems to be stuck\n");

}

void print_memory(int address, int length)
{
    //    for (int i = address; i <= address + length ; i=i + 16){
    //        fprintf(stderr, "\n%04X:  ", i);
    //        for (int j = 0; j < 16; j++){
    //            fprintf(stderr, "%02X ", mem[i+j]);
    //        }
    //    }
    //    fprintf(stderr, "\n");
}

void print_screen_memory_2(void)
{
    for (int i = 0x5800; i < 0x5800 + 768 ; i=i + 8){
        fprintf(stderr, "\n    ");
        for (int j = 0; j < 8; j++){
            fprintf(stderr, "0x%02x, ", mem[i+j]);
        }
    }
}

void print6430(void) {
    print_memory(0x6430, 97);
}

void print_screen_memory(void) {
    //    fprintf(stderr, "Graphics memory:\n");
    //    print_memory(0x4000, 768);
    //    fprintf(stderr, "Attributes memory:\n");
    //    print_memory(0x5800, 768);
}


uint16_t HL, pushedHL, BC, pushedBC, DE, IX, pushedIX, current_screen_address, temp;
uint8_t A, carry, pushedA;

void draw_character(void);

void call6B07(void);
void call6B27(void);
void call6A87(void);

static void draw_forest(void) {
    OpenGraphicsWindow();

    mem = (uint8_t *)malloc(0xffff);
    memset(mem, 0, 0xffff);

    for (int i = 0; i<FileImageLen; i++) {
        mem[i+16357] = FileImage[i];
    }

    for (int i = 0x4000; i<0x5800; i++) {
        mem[i] = 0;
    }

    uint16_t image_number_pointer = 0x7b53; // Forest image number lookup
    for (int i = 0; i < MyLoc - 11; i++)
    {
        DE = 5;
        if ((mem[image_number_pointer] & 128) != 128)
            DE = 11;
        image_number_pointer += DE;
    }

    fprintf(stderr, "Current image: %d\n", mem[image_number_pointer] & 127);

    BC = 5;
    A = 1;

    if ((mem[image_number_pointer] & 128) == 128) {
        mem[0x60d5] = 0;
        mem[0x60d6] = 0;
    } else {
        A = 0;
        BC = (mem[image_number_pointer + 10] + 1) * 256 + 10;
        if ((BC >> 8) != 0) {
            BC++;
            A = 2;
        }
    }
    mem[0x6404] = A;  // 0x6404 = image number?
    int number_of_images = BC & 0xff;
    int images_to_draw = number_of_images;
    fprintf(stderr, "number of images is set to %d\n", number_of_images);
    BC = number_of_images + number_of_images * 256;

    uint16_t attributes_pointer = 0x6000;

    do {
        int image_number = mem[image_number_pointer];

        //    fprintf(stderr, "Current image: %d\n", image_number & 127);

        image_number = image_number & 127;
        image_number_pointer++;

        // retrieve address of image

        HL = 0xA6A4 + image_number * 2;

        DE = mem[HL] + mem[HL+1] * 256;
        HL = 0xA74a + DE; // HL is now image address

        mem[0x6432] = HL & 0xff; // store retrieved image address at $6432
        mem[0x6433] = HL >> 8;

        fprintf(stderr, "Current image: %d address: %x\n", image_number, HL);
        if (image_number == 127) {
            fprintf(stderr, "Something went wrong\n");
            fprintf(stderr, "current location: %d\n", MyLoc);

        }

        call6B27();
        draw_character(); // draw character

        // call 0x6B6C Is this storing attributes?
        HL = mem[0x60CB] + mem[0x60CC] * 256;

        DE = attributes_pointer ; // 0x6000 initially

        for (int i = 0; i < 4; i++) {
            mem[DE++] = mem[HL++];
        }

        HL = 0x6432;
        mem[DE++] = mem[HL++];
        mem[DE++] = mem[HL++];
        attributes_pointer = DE;

        // return from 0x6B6C, at 0x68C

        A = mem[0x6404];
        if (rotate_right_with_carry(&A, carry)) {
            A = mem[0x643A];
            A = A + mem[0x60D5];
            mem[0x60D5] = A;
        } else {
            mem[0x60D2]++;
        }
        images_to_draw--;
    } while (images_to_draw > 0);


    //    for (int i = 0; i < 6144; i++)
    //    {
    //        if (mem[0x4000+i] != forest_mem[i])
    //            fprintf(stderr, "Error: wrong byte in graphics memory at %x! Expected %x, got %x\n", 0x4000+i,forest_mem[i], mem[0x4000+i]);
    //    }


    //    print_memory(0x6000, 32);


    A = number_of_images;
    HL = 0x6000;
    for (int i = A; i > 0; i--) {
        call6B07();
        HL++;
        DE = 0x6432;
        mem[DE++] = mem[HL++];
        mem[DE++] = mem[HL++];
        mem[DE] = mem[HL];
        mem[DE+1] = mem[HL+1];

        pushedHL = HL;

        call6A87(); // Draw attributes

        HL = pushedHL;
    };

    //    print_screen_memory();

    glk_window_clear(Graphics);

    for (int i = 0; i < 768; i++)
    {
        glui32 paper = (mem[0x5800+i] >> 3) & 0b111;
        paper += 8 * ((mem[0x5800+i] & 64) == 64);
        RectFill((i % 32) * 8, (i / 32) * 8, 8, 8, paper);
        //        fprintf(stderr, "Filling (8 x 8 rect at x:%d y:%d (char pos %d, %d), color %d\n", (i % 32) * 8, (i / 24) * 8, (i % 32), (i / 32), paper);
    }


    for (int i = 0; i < 3972; i++)
    {
        uint16_t address = 0x4000+i;
        uint8_t x = (address & 0b11111) * 8;
        uint8_t low = (address >> 8) & 0b111;
        uint8_t mid = (address >> 2) & 0b111000;
        uint8_t high = (address >> 5) & 0b11000000;
        uint8_t y = low | mid | high;

        glui32 ink = (mem[0x5800+(y/8) * 32 + (x/8)] & 0b111);
        ink += 8 * ((mem[0x5800+(y/8) * 32 + (x/8)] & 64) == 64);

        for (int j = 7; j >= 0; j--) {
            if ((mem[address] >> j) & 1)
                PutPixel(x+7-j,y, ink);
        }
    }

    A = 0;
    mem[0x60D2] = 0;
    mem[0x60D5] = 0;
    HL = 0;
    mem[0x60D7] = 0;
    mem[0x60D8] = 0;
    mem[0x60D9] = 0;
    mem[0x60DA] = 0;

}

void call6B07(void)
{
    mem[0x643A] = mem[HL];
    mem[0x643C] = mem[HL++];
    mem[0x643B] = mem[HL];
    mem[0x643D] = mem[HL++];
    mem[0x6437] = mem[HL];
    BC = mem[HL++];
    A = mem[HL];
    mem[0x6438] = A;
    mem[0x6439] = A;
}

void call6B27(void)
{
    BC = mem[HL] * 256 + mem[HL+1];
    HL = HL +2;

    uint16_t pushedHL = HL;
    A = mem[0x6404];
    HL = 0x60D3;
    carry = (A & 1);
    if (!carry)
        HL = 0x60D7;
    uint16_t pushedHL2 = HL;
    mem[HL++] = BC >> 8;
    mem[HL++] = BC & 0xff;
    if (!carry) {
        A = mem[0x60D2];
        if (A >= 8)
        {
            BC = 0x0700;
            if (A == 8)
                goto jump6B5F;
            BC = 0xA00;
            if (A == 9)
                goto jump6B5F;
            BC = 0x070C;
        } else {
            carry = ((A & 128) == 128);
            A = (A<<2);
            BC = A;
        }
    jump6B5F:
        mem[HL++] = BC & 0xff;
        mem[HL] = BC >> 8;
    }
    HL = pushedHL2;

    mem[0x60CB] = HL & 0xff;
    mem[0x60CC] = HL >> 8;

    call6B07();

    HL = pushedHL;
    HL++;
}

int call6A4B(void);

void call60c1(void) {
    HL = A * 2 + 0x5bd0;
    uint8_t E = mem[HL++];
    uint8_t D = mem[HL];
    DE = E + D * 256;
}

void call7151(void) {
    pushedBC = BC;
    if (A == 0xAA) {
        HL = mem[0x717d] + mem[0x717e] * 256;
        HL++;
        A = mem[HL];
    }
    pushedHL = HL;
    uint16_t lastPushed = HL;
    HL = 0x7837;
    BC = 0x12;

    while (mem[HL] != A && BC != 0 && HL != 0) {
        HL++;
        BC--;
    }
    HL--;
    if (mem[HL] == A) {
        HL = 0x7849;
        A = 0x11;
        A = A - BC;
        BC = A;
        HL = HL + BC;
        HL = HL + BC;
        BC = mem[HL];
        HL++;
        uint8_t h = mem[HL];
        uint8_t l = BC & 0xff;
        HL = l + h * 256;
        pushedHL = HL;
        HL = lastPushed;
        mem[0x717d] = HL;
    }
    HL = pushedHL;
    BC = pushedBC;
    A = mem[HL];
}

int call72b8(void) // Get next character?
{
    DE = current_screen_address + 1;
    // DE = 16384, screen adress
    current_screen_address = DE;
    // screen adress is increased by 1, next element / byte to the right

    mem[0x5bc6]--;
    if (mem[0x5bc6] != 0)
        return 0;
    mem[0x5bc7]--;
    if (mem[0x5bc7] == 0)
        return 1;
    mem[0x5bc6] = mem[0x5bc4];
    mem[0x5bc3]++;
    HL = mem[0x6439] * 2 + 0x63D0;
    DE = mem[HL] + mem[HL+1] * 256;
    HL = mem[0x6437] + DE;
    current_screen_address = HL;
    return 0;
}


//Routine at 717f

void draw_character(void) // transform character at A
{
    //    fprintf(stderr, "draw_character: Character at %x\n", A);
    pushedHL = HL;

    HL = 0x5bd0 + A * 2; // screen memory address?
                         // 63D0 is a list of screen adresses, starting at 0x4000 = 16384
                         // increasing by 32

    DE = mem[HL] + mem[HL+1] * 256;
    HL=HL+2;
    uint16_t temp = HL;
    HL = DE;
    DE = temp;
    HL = HL + BC; // HL = screen memory address
                  // The screen address is stored in current_screen_address
    current_screen_address = HL;
    HL = pushedHL; // Address to current draw instruction in "image data" 0xCFFA abouts
    HL++;
    // Next draw instruction address is stored in 0x6432
    mem[0x5bba] = HL & 0xFF;
    mem[0x5bbb] = HL >> 8;
    HL = pushedHL++;
    mem[0x5bbc] = HL & 0xFF;
    mem[0x5bbd] = HL >> 8;
    mem[0x5bc8] = 0; // 0x6446 and 0x6436 are reset to 0
    mem[0x5bc0] = 0;
jump7194:
    mem[0x5bbe] = 0; // 0x6434 is reset to 0
    A = mem[HL]; // A = next draw instruction
                 //    fprintf(stderr, "6912transform: Current Draw instruction at mem[0x6434]: %x\n", A);
    call7151();
    mem[0x5bbc] = HL & 0xFF;
    mem[0x5bbd] = HL >> 8;
    if ((A & 128) == 128) {
        // Bit 7 unset
        mem[0x5bbe] = A; // draw instruction is stored in 0x6434 and 0x6435
        mem[0x5bbf] = A;
        A = A & 2; // Test bit 1, repeat flag
        if (A!=0) {
            HL++;
            A = mem[HL]; // Set A to next instruction
            mem[0x5bc0] = A; // and store it in 0x6436
        }
        HL++;
        A = mem[HL];
        call7151();
        mem[0x5bbc] = HL & 0xFF;
        mem[0x5bbc] = HL >> 8;
    } else {
        //        fprintf(stderr, "bit 7 is not set: print character %x\n", A);
    }
    HL = A;
    BC = mem[0xc3cb] +  mem[0xc3cc] * 256; // Lookup table for character offsets
    A = mem[0x5bbf];
    if ((A & 1) == 1) { // Test bit 0, whether to add 127 to character index
        uint8_t B = BC >> 8;
        B = B + 4;
        BC = (BC & 0xFF) + B * 256;
    }

    IX = HL * 8 + BC; // HL = A4B4
    HL = 0x5bb2;
    A = mem[0x5bbe]; // Current draw instruction
    A = (A & 0x30); // bits 4 and 5
    switch (A) {
        case 0: // do nothing, straight copy
                //            fprintf(stderr, "0: do nothing, straight copy\n");
            for (int i = 0; i < 8; i++) {
                mem[HL++] = mem[IX++];
            }
            break;
        case 0x10: // rotate 90 degrees
                   //            fprintf(stderr, "0x10: rotate 90 degrees\n");
            for (int C = 8 ; C > 0 ; C--) {
                A = mem[IX];
                for (int B = 8 ; B > 0 ; B--) {
                    carry = ((A & 128) == 128);
                    A = A << 1;
                    carry = rotate_right_with_carry(&mem[HL++], carry);
                }
                HL = 0x5bb2;
                IX++;
            }
            break;
        case 0x20:  // rotate 180 degrees
                    //            fprintf(stderr, "0x20: rotate 180 degrees\n");
            HL = 0x5bb9;
            for (int C = 0; C < 8; C++) {
                A = mem[IX];
                for (int B = 0; B < 8; B++) {
                    carry = ((A & 128) == 128);
                    A = A << 1;
                    carry = rotate_right_with_carry(&mem[HL], carry);
                } ;
                IX++;
                HL--;
            }
            break;

        case 0x30: // Rotate 270 degrees
                   //            fprintf(stderr, "0x30: rotate 270 degrees\n");
            for (int C = 0; C < 8 ; C++) {
                A = mem[IX];
                for (int B = 0; B < 8 ; B++) {
                    carry = (A & 1);
                    A = A >> 1;
                    carry = rotate_left_with_carry(&mem[HL++], carry);
                }
                HL = 0x5bb2;
                IX++;
            }
            break;
        default:
            break;
    }

    A = mem[0x6434];
    A = A & 0x40; // bit 6
    if (A != 0) {  // flip horizontally
                   //        fprintf(stderr, "bit 6 is set: flip horizontally\n");
        HL = 0x5bb2;
        for (int C = 0; C < 8 ; C++) {
            A = mem[HL];
            for (int B = 0; B < 8 ; B++) {
                carry = ((A & 128) == 128);
                A = (A << 1); //+ (A & 1);
                carry = rotate_right_with_carry(&mem[HL], carry);
            }
            HL++;
        }
    }
    DE = current_screen_address; // Screen adress
    HL = 0x5bb2;

    for (int B = 0; B < 8; B++) {
        A = mem[0x5bc8]; // flip mode
        switch(A) {
            case 4: // The screen memory value is ORed
                    //                fprintf(stderr, "4: OR\n");
                A = mem[DE] | mem[HL];
                break;
            case 8: // The screen memory is ANDed
                    //                fprintf(stderr, "8: AND\n");
                A = mem[DE] & mem[HL];
                break;
            case 12:  // The screen memory is XORed
                      //                fprintf(stderr, "12: XOR\n");
                A = mem[DE] ^ mem[HL];
                break;
            default:
                //                fprintf(stderr, "0: straight overlay \n");
                A = mem[HL];
                break;
        }
        mem[DE] = A; // set screen adress to new value
                     //        fprintf(stderr, "Set address %x to %x\n", DE, mem[DE]);
        if (DE < 0x4000 || DE > 0x5B00)
            fprintf(stderr, "Something went wrong\n");

        mem[HL++] = A;
        DE = DE + 256; // Next line
    }
    A = mem[0x5bbe];
    A = A & 0x0c;
    mem[0x5bc8] = A; // Flip mode
    if (mem[0x5bc8] == 0) { // No flip
    jump6A1D:
        A = mem[0x5bc0];
        if (A != 0) {
            if (call6A4B()) // Get screen address for next character?
                return;
            HL = 0x643E;
            DE = current_screen_address; // Screen adress

            for (int B = 0; B < 8; B++) {
                A = mem[HL++];
                mem[DE] = A;
                if (DE < 0x4000 || DE > 0x5B00)
                    fprintf(stderr, "Something went wrong\n");
                DE = DE + 256;
            }

            mem[0x5bc0]--;
            if (mem[0x5bc0] != 0) {
                goto jump6A1D;
            }
        }
        if (call72b8())
            return;
    }

    HL = mem[0x5bbc] + mem[0x5bbc] * 256;
    HL++;
    mem[0x5bbc] = HL & 0xff;
    mem[0x5bbc] = HL >> 8;
    goto jump7194;
}





void call72ff(void) { // Draw attributes?
    HL = mem[0x5bbc] + mem[0x5bbd] * 256;
    HL++;
    pushedHL = HL;
    mem[0x5bc6] = mem[0x5bc4];
    HL = mem[0x5bc2] * 32;
    A = mem[0x5bc1];
    DE = A;
    HL += DE;
    DE = mem[0x5bc9] + mem[0x5bca] * 256;
    HL += DE;
    DE = HL;
    HL = pushedHL;
jump7320:
    A = mem[HL];
    call7151();
    pushedHL = HL;
    if (A == 0xFE) {
        A = pushedA;
       return;
    }
    if ((A & 128) == 128) { // Bit 7 is repeat flag
        A = A & 0x7F;
        A--;
        mem[0x5bc0] = A;
        A = mem[0x5bcb];
    }
jump7336:
    mem[DE] = A;
    //    fprintf(stderr, "Attribute address %x set to %x\n", DE, A);
//    print_memory(0x5800, 768);
    mem[0x5bcb] = A;
    DE++;
    mem[0x5bc6]--;
    if (mem[0x5bc6] == 0) {
        pushedHL = 0;
        A = mem[0x5bc4];
        mem[0x5bc6] = A;
        HL = A;
        A = 0x20;
        A = A - HL;
        HL = A;
        HL = HL & 0xff;
        HL = HL + DE;
        DE = HL;
        HL = pushedHL;
    }

    if (mem[0x5bc0] != 0)
    {
        mem[0x5bc0]--;
        A = mem[0x5bcb];
        goto jump7336;
    }
    HL = pushedHL++;
    goto jump7320;
}

/*
 ; Routine at 72ff
 ;
 ; Used by the routine at #R$7025.
 c$72ff ld hl,($5bbc) ; Draw attributes
 $7302 inc hl        ;
 $7303 push hl       ;
 $7304 ld a,($5bc4)  ;
 $7307 ld ($5bc6),a  ; Image height = a
 $730a ld hl,($5bc2) ;
 $730d ld h,$00      ;
 $730f call $0e93    ;
 $7312 ld a,($5bc1)  ; A = xpos
 $7315 ld e,a        ;
 $7316 ld d,$00      ;
 $7318 add hl,de     ;
 $7319 ld de,($5bc9) ; start address
 $731d add hl,de     ;
 $731e ex de,hl      ; de = start address + xpos + ypos * 32
 $731f pop hl        ;
 *$7320 ld a,(hl)     ;
 $7321 call $7151    ;
 $7324 push hl       ;
 $7325 cp $fe        ;
 $7327 jr z,$72e7    ;
 $7329 bit 7,a       ;
 $732b jr z,$7336    ;
 $732d and $7f       ; // Bit 7 is repeat flag
 $732f dec a         ;
 $7330 ld ($5bc0),a  ;
 $7333 ld a,($5bcb)  ;
 *$7336 ld (de),a     ;
 $7337 ld ($5bcb),a  ;
 $733a inc de        ;
 $733b ld hl,$5bc6   ; Image height
 $733e dec (hl)      ;
 $733f jr nz,$7352   ;
 $7341 push hl       ;
 $7342 ld a,($5bc4)  ;
 $7345 ld ($5bc6),a  ; Image width
 $7348 ld l,a        ;
 $7349 ld a,$20      ;
 $734b sub l         ;
 $734c ld l,a        ;
 $734d ld h,$00      ;
 $734f add hl,de     ;
 $7350 ex de,hl      ;
 $7351 pop hl        ;
 *$7352 ld a,($5bc0)  ;
 $7355 or a          ;
 $7356 jr z,$7361    ;
 $7358 dec a         ;
 $7359 ld ($5bc0),a  ;
 $735c ld a,($5bcb)  ;
 $735f jr $7336      ;
 *$7361 pop hl        ;
 $7362 inc hl        ;
 $7363 jr $7320      ;


 ; Routine at 7151
 ;
 ; Used by the routines at #R$717f and #R$72ff.
 c$7151 push bc       ;
 $7152 cp $aa        ;
 $7154 jr nz,$715b   ;
 $7156 ld hl,($717d) ;
 $7159 inc hl        ;
 $715a ld a,(hl)     ;
 *$715b push hl       ;
 $715c ld hl,$7837   ;
 $715f ld bc,$0012   ;
 $7162 cpir          ;
 $7164 dec hl        ;
 $7165 cp (hl)       ;
 $7166 jr nz,$7179   ;
 $7168 ld hl,$7849   ;
 $716b ld a,$11      ;
 $716d sub c         ;
 $716e ld c,a        ;
 $716f add hl,bc     ;
 $7170 add hl,bc     ;
 $7171 ld c,(hl)     ;
 $7172 inc hl        ;
 $7173 ld h,(hl)     ;
 $7174 ld l,c        ;
 $7175 ex (sp),hl    ;
 $7176 ld ($717d),hl ;
 *$7179 pop hl        ;
 $717a pop bc        ;
 $717b ld a,(hl)     ;
 $717c ret           ;

 ; Used by the routines at #R$664b, #R$665e, #R$66ed, #R$717f, #R$72b8 and
 ; #R$75a1.
 c$60c1 ld l,a        ;
 $60c2 ld h,$00      ;
 $60c4 add hl,hl     ; HL = A  * 2
 $60c5 ld de,$5bd0   ; DE = 5bd0
 $60c8 add hl,de     ; HL = A * 2 + 5bd0
 $60c9 jp $2af0      ;

 2AF0    LD E,(HL)    In effect - LD E,(DE+1).
 2AF1    INC HL    Point to 'DE+2'.
 2AF2    LD D,(HL)    In effect - LD D,(DE+2).
 2AF3    RET    Finished.



 Routine at 717f
 ;
 ; Used by the routine at #R$7025. // transform character at A
 c$717f push hl       ;
 $7180 call $60c1    ;
 $7183 ex de,hl      ;
 $7184 add hl,bc     ;
 $7185 ld ($5bba),hl ;
 $7188 pop hl        ;
 $7189 inc hl        ;
 $718a ld ($5bbc),hl ;
 $718d xor a         ;
 $718e ld ($5bc8),a  ;
 $7191 ld ($5bc0),a  ;
 *$7194 xor a         ;
 $7195 ld ($5bbe),a  ;
 $7198 ld a,(hl)     ;
 $7199 call $7151    ;
 $719c ld ($5bbc),hl ;
 $719f bit 7,a       ;
 $71a1 jr z,$71ba    ;
 $71a3 ld ($5bbe),a  ;
 $71a6 ld ($5bbf),a  ;
 $71a9 and $02       ;
 $71ab jr z,$71b2    ;
 $71ad inc hl        ;
 $71ae ld a,(hl)     ;
 $71af ld ($5bc0),a  ;
 *$71b2 inc hl        ;
 $71b3 ld a,(hl)     ;
 $71b4 call $7151    ;
 $71b7 ld ($5bbc),hl ;
 *$71ba ld l,a        ;
 $71bb ld h,$00      ;
 $71bd ld bc,$c3cb   ;
 $71c0 ld a,($5bbf)  ;
 $71c3 bit 0,a       ;
 $71c5 jr z,$71cb    ;
 $71c7 inc b         ;
 $71c8 inc b         ;
 $71c9 inc b         ;
 $71ca inc b         ;
 *$71cb add hl,hl     ;
 $71cc add hl,hl     ;
 $71cd add hl,hl     ;
 $71ce add hl,bc     ;
 $71cf push hl       ;
 $71d0 pop ix        ;
 $71d2 ld hl,$5bb2   ;
 $71d5 ld b,$08      ;
 $71d7 ld a,($5bbe)  ;
 $71da and $30       ;
 $71dc jr nz,$71e9   ;
 *$71de ld a,(ix+$00) ;
 $71e1 ld (hl),a     ;
 $71e2 inc ix        ;
 $71e4 inc hl        ;
 $71e5 djnz $71de    ;
 $71e7 jr $723b      ;
 *$71e9 cp $10        ;
 $71eb jr nz,$7205   ;
 $71ed ld c,$08      ;
 *$71ef ld b,$08      ;
 $71f1 ld a,(ix+$00) ;
 *$71f4 sla a         ;
 $71f6 rr (hl)       ;
 $71f8 inc hl        ;
 $71f9 djnz $71f4    ;
 $71fb ld hl,$5bb2   ;
 $71fe inc ix        ;
 $7200 dec c         ;
 $7201 jr nz,$71ef   ;
 $7203 jr $723b      ;
 *$7205 cp $20        ;
 $7207 jr nz,$7221   ;
 $7209 ld c,$08      ;
 $720b ld hl,$5bb9   ;
 *$720e ld b,$08      ;
 $7210 ld a,(ix+$00) ;
 *$7213 sla a         ;
 $7215 rr (hl)       ;
 $7217 djnz $7213    ;
 $7219 inc ix        ;
 $721b dec hl        ;
 $721c dec c         ;
 $721d jr nz,$720e   ;
 $721f jr $723b      ;
 *$7221 cp $30        ;
 $7223 jr nz,$723b   ;
 $7225 ld c,$08      ;
 *$7227 ld b,$08      ;
 $7229 ld a,(ix+$00) ;
 *$722c srl a         ;
 $722e rl (hl)       ;
 $7230 inc hl        ;
 $7231 djnz $722c    ;
 $7233 ld hl,$5bb2   ;
 $7236 inc ix        ;
 $7238 dec c         ;
 $7239 jr nz,$7227   ;
 *$723b ld a,($5bbe)  ;
 $723e and $40       ;
 $7240 or a          ;
 $7241 jr z,$7255    ;
 $7243 ld c,$08      ;
 $7245 ld hl,$5bb2   ;
 *$7248 ld b,$08      ;
 $724a ld a,(hl)     ;
 *$724b sla a         ;
 $724d rr (hl)       ;
 $724f djnz $724b    ;
 $7251 inc hl        ;
 $7252 dec c         ;
 $7253 jr nz,$7248   ;
 *$7255 ld de,($5bba) ;
 $7259 ld hl,$5bb2   ;
 $725c ld b,$08      ;
 *$725e ld a,($5bc8)  ;
 $7261 cp $04        ;
 $7263 jr nz,$7269   ;
 $7265 ld a,(de)     ;
 $7266 or (hl)       ;
 $7267 jr $727a      ;
 *$7269 cp $08        ;
 $726b jr nz,$7271   ;
 $726d ld a,(de)     ;
 $726e and (hl)      ;
 $726f jr $727a      ;
 *$7271 cp $0c        ;
 $7273 jr nz,$7279   ;
 $7275 ld a,(de)     ;
 $7276 xor (hl)      ;
 $7277 jr $727a      ;
 *$7279 ld a,(hl)     ;
 *$727a ld (de),a     ;
 $727b ld (hl),a     ;
 $727c inc hl        ;
 $727d inc d         ;
 $727e djnz $725e    ;
 $7280 ld a,($5bbe)  ;
 $7283 and $0c       ;
 $7285 ld ($5bc8),a  ;
 $7288 jr nz,$72ae   ;
 *$728a ld a,($5bc0)  ;
 $728d or a          ;
 $728e jr z,$72ab    ;
 $7290 call $72b8    ;
 $7293 ld b,$08      ;
 $7295 ld hl,$5bb2   ;
 $7298 ld de,($5bba) ;
 *$729c ld a,(hl)     ;
 $729d ld (de),a     ;
 $729e inc hl        ;
 $729f inc d         ;
 $72a0 djnz $729c    ;
 $72a2 ld a,($5bc0)  ;
 $72a5 dec a         ;
 $72a6 ld ($5bc0),a  ;
 $72a9 jr nz,$728a   ;
 *$72ab call $72b8    ;
 *$72ae ld hl,($5bbc) ;
 $72b1 inc hl        ;
 $72b2 ld ($5bbc),hl ;
 $72b5 jp $7194      ;

 ; Routine at 72b8
 ;
 ; Used by the routine at #R$717f.
 c$72b8 ld de,($5bba) ;
 $72bc inc de        ;
 $72bd ld ($5bba),de ;
 $72c1 ld hl,$5bc6   ; Image height
 $72c4 dec (hl)      ;
 $72c5 ret nz        ;
 $72c6 ld hl,$5bc7   ;
 $72c9 dec (hl)      ;
 $72ca jr z,$72e7    ;
 $72cc ld a,($5bc4)  ;
 $72cf ld ($5bc6),a  ; Image height = a
 $72d2 ld a,($5bc3)  ;
 $72d5 inc a         ;
 $72d6 ld ($5bc3),a  ;
 $72d9 call $60c1    ;
 $72dc ld a,($5bc1)  ;
 $72df ld l,a        ;
 $72e0 ld h,$00      ;
 $72e2 add hl,de     ;
 $72e3 ld ($5bba),hl ;
 $72e6 ret           ;
 ; This entry point is used by the routine at #R$72ff.
 *$72e7 pop af        ;
 $72e8 ret           ;
 */
